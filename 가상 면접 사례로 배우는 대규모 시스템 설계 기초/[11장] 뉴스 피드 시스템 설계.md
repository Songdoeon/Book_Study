## 🌈 Chapter 11 : 뉴스 피드 시스템 설계

<details><summary>정리</summary>
  
```

```

</details>

이번 장에서는 뉴스 피드 시스템 설계 문제를 살펴볼 것이다.

뉴스 피드 시스템 설계는 아주 유명한 면접문제다

Ex) 페이스북 뉴스 피드, 인스타그램 피드 설계, 트위터 타임라인 설계
> 뉴스 피드(news feed) : 홈페이지에 지속적으로 업데이트 되는 스토리들로, 사용자 상태 정보 업데이트, 사진, 비디오, 링크, 앱 활동 등 

## 📚 1단계 : 문제 이해 및 설계 범위 확정

어떤 기능을 지원하는지 파악해보자

> 지원자: 모바일 앱을 위한 시스템인가요? 아니면 웹? 아니면 둘다?
> 
> 면접관: 둘 다 지원해야 합니다.
> 
> 지원자: 중요한 기능으로는 어떤 것이 있을까요?
> 
> 면접관: 사용자는 뉴스 피드 페이지에 새로운 스토리를 올릴 수 있어야 하고, 친구들이 올리는 스토리를 볼 수도 있어야 합니다.
> 
> 지원자: 뉴스 피드에는 어떤 순서로 스토리가 표시되어야 하나요? 최신포스트가 위에 오도록? 아니면 토픽 점수 같은 다른 기준이 있습니까?
> 예를 들어, 가까운 친구의 포스트는 좀 더 위에 배치 되어야 한다든가.
> 
> 면접관: 그냥 단순히 시간 흐름 역순으로 표시된다고 가정합니다.
> 
> 지원자: 한 명의 사용자는 최대 몇 명의 친구를 가질 수 있습니까?
> 
> 면접관: 5000명 입니다.
> 
> 지원자: 트래픽 규모는 어느 정도 입니까?
> 
> 면접관: 매일 천만 명이 방문한다고 가정합시다(10million DAU)
>
> 지원자: 피드에 이미지나 비디오 스토리도 올라올 수 있습니까?
>
> 면접관: 스토리에는 이미지나 비디오 등 미디어 파일이 포함될 수 있습니다.


## 📚 2단계 : 개략적 설계안 제시 및 동의 구하기
지금부터 살펴볼 설계안은 피드발행(feed publishing) 그리고 뉴스 피드 생성(feed building) 두 가지로 나뉘어있다.

- 피드 발행
  - 사용자가 스토리를 포스팅 하면 해당 데이터를 캐시와 데이터베이스에 기록한다.
  - 새 포스팅은 친구의 뉴스 피드에도 전송된다.
- 뉴스 피드 생성
  - 지면 관계상 뉴스 피드는 모든 친구의 포스팅을 시간 흐름 역순으로 모아서 만든다고 가정한다.

### 🎈 뉴스 피드 API
뉴스 피드 API는 클라이언트가 서버와 통신하기 위해 사용하는 수단이다.

HTTP 프로토콜 기반이고, 상태 정보를 업데이트하거나, 뉴스 피드를 가져오거나, 친구를 추가하는 등의 다양한 작업을 수행하는 데 사용한다.

지금부터 가장 중요한 두 가지 API, 피드 발행과 피드 읽기 API를 살펴보자.


#### 📕 피드 발행 API
새 스토리를 포스팅 하기 위한 API다. HTTP POST 형태로 요청을 보내면 된다.

- `POST /v1/me/feed`
   - 바디(body) : 포스팅 내용에 해당한다.
   - Authorizaion 헤더 : API 호출을 인증하기 위해 사용한다.
 
#### 📕 피드 읽기 API
뉴스 피드를 가져오는 API다. 다음과 같은 형태를 띤다.

- `GET /v1/me/feed`
  - Authorization 헤더 : API 호출을 인증하기 위해 사용한다.


### 🎈 피드 발행
<img src = "https://github.com/Songdoeon/Book_Study/assets/96420547/bd30ee68-103c-4e38-b969-5c81b2024338" width = 800 height = 1100>
