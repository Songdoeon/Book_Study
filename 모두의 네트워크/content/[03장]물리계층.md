## 🌈 Chapter 3 : 물리계층 : 데이터를 전기 신호로 변환하기


### 📚 LESSEN 9 : 물리 계층의 역할과 랜 카드의 구조
---
데이터는 전기 신호로 변환되어 네트워크를 통해 전송됩니다.

여기서는 전기 신호에 대해 알아보자.

#### 🎈 전기 신호란?
0과 1만으로 이루어진 비트열을 전기 신호로 변환하려면 맨 아래 계층인 물리 계층의 기술이 필요하다.

전기 신호의 종류
- 아날로그 신호
  - 전화 회선이나 라디오 방송에 사용되는 물결모양 신호
- 디지털 신호
  - 0과 1계층이 있는 막대모양


#### 🎈 랜 카드란?
컴퓨터는 네트워크를 통해 데이터를 송수신할 수 있도록 랜 카드가 메인보드에 포함되어있는 내장형 랜 카드 또는 별도의 랜 카드를 가지고 있다.

비트는 컴퓨터 내부 랜카드로 전송되고 랜 카드는 비트를 전기 신호로 변환한다.


### 📚 LESSEN 10 : 케이블의 종류와 구조

네트워크 전송 매체의 종류에는 유선과 무선이 있다.

이번에는 유선 전송 매체로 사용되는 네트워크 케이블 커넥터에 대해 알아보자.

#### 🎈 Twist pair cable

전송 매체란 데이터가 흐르는 물리적인 선로로 다음과 같은 것들이 있다.

- 유선
  - UTP, STP, FTP 등
  - 광케이블, 동케이블
- 무선
  - 라디오파, 마이크로파
  - 적외선 등

#### 🎈 Direct cable vs Cross cable

- 다이렉트 케이블
  - 컴퓨터와 스위치를 연결할 때 사용
- 크로스 케이블
  - 컴퓨터 간 직접 랜 케이블로 연결할 때 사용
  - 같은 종류의 매체끼리 연결할 때 사용한다는 뜻
 
### 📚 LESSEN 11 : 리피터와 허브의 구조
물리 계층의 네트워크 장비에는 리피터와 허브가 있다.

#### 🎈 리피터와 허브
물리 계층에서 동작하는 네트워크 장비인 리피터와 허브에 대해 알아보겠다

- 리피터
  - 전기 신호를 정형하고 증폭하는 기능을 가진 네트워크 중계 장비
  - 통신하는 상대방이 멀리 있을 때 리피터를 사용한다.
  - 요즘은 다른 네트워크 장비가 리피터 기능을 지원하여 잘 쓰지 않는다.
  - 1:1 통신만 가능
- 허브
  - 리피터 허브라고도 불리기도 한다.
  - 포트를 여러 개 가지고 있어 컴퓨터 여러 대와도 통신할 수 있다.
  - 컴퓨터 여러 대가 데이터를 주고받을 때 유용하다.
  - 하지만 포트로 부터 받은 데이터는 특정 포트로 보내는 것이 아닌 다른 포트 전부에게 보낸다.
  - 스스로 판단하지 않기에 더비 허브라는 이름으로 불리기도 한다.

## 🌈 Chapter 4 : 데이터 링크 계층 : 랜에서 데이터 전송하기

### 📚 LESSEN 12 : 데이터 링크 계층의 역할 과 이더넷
랜에서는 데이터를  주고 받는 규칙으로 이더넷을 사용한다.

#### 🎈 이더넷
랜에서 데이터를 주고받으려면 두 번째 계층인 데이터 링크 계층의 기술이 필요하다.

데이터 링크 계층은 네트워크 장비 간에 신호를 주고받는 규칙을 정하는 계층으로, 랜에서 데이터를 정상적으로 주고받기 위해 필요한 계층이다.


그 규칙중 가장 많이 사용되는 규칙이 이더넷(Ethernet)이다.

이더넷
- 허브가 모든 포트로 데이터를 보내 불필요한 전송을 막기위해 이더넷 규칙을 이용한다.
- 데이터에 목적지 정보를 추가해서 보내고 목적지 이외의 컴퓨터는 데이터를 무시한다.
- 데이터를 확실히 무시하도록 정해져있어 문제가 발생하지 않는다.

하지만 컴퓨터 여러대가 동시에 데이터를 보내면 데이터를이 서로 부딛힐 수 있다 이것을 충돌(collision)이라 한다.

그래서 이더넷은 여러 컴퓨터가 동시에 데이터를 전송해도 충돌이 일어나지않게 되어있다.

이처럼 이더넷에서 시점을 늦추는 방법을 CSMA/CD라 한다.
  > CSMA/CD : Carrier Sense Multiple Access with Collsion Detection의 약자로 반송파 감지 다중접속 및 충돌 탐지의 약어이다.

#### 📕 CSMA/CD
- CS
  - 데이터를 보내려고 하는 컴퓨터가 케이블에 신호가 흐르고있는지 확인한다는 규칙이다.
- MA
  - 케이블에 데이터가 흐르고 있지 않다면 데이터를 보내도 좋다는 규칙이다.
- CD
  - 충돌이 발생하고 있는지를 확인한다는 규칙이다.

지금은 효율이 좋지않다는 이유로 CSMA/CD는 거의 사용하지 않는다.

나중에 스위치를 설명하며 보충설명한다.

### 📚 LESSEN 13 : MAC 주소의 구조

랜 카드는 비트열을 전기 신호로 변환한다.

이러한 랜 카드에는 MAC 주소라는 번호가 정해져 있다. 제조할 때 새겨져 물리 주소라고도 불르는데 전 세계에서 유일한 번호로 할당되어 있다.

MAC 주소는 48비트 숫자로 구성되어 있고 그중 앞 24비트는 랜 카드를 만든 제조사 번호 뒤 24비트는 제조사가 랜 카드에 뭍인 일련번호이다.

그럼 MAC 주소를 사용한 통신을 살펴보자.

TCP/IP 모델의 네트워크 계층 그리고 OSI 모델의 데이터 링크 계층에서는 이더넷 헤더와 트레일러를 붙인다.
  > 이더넷 헤더 : 목적지의 MAC 주소(6바이트), 출발지의 MAC 주소(6바이트), 유형(2바이트) 이렇게 총 14바이트로 구성되어 있다.

#### 🎈 이더넷 유형
이더넷 유형은 이더넷으로 전송되는 상위 계층 프로토콜의 종류를 나타낸다.

여기에는 다음 표에 나와 있는 프로토콜을 식별하는 16진수가 들어간다.

|유형번호|프로토콜|
|--|--|
|0800|IPv4|
|0806|ARP|
|8035|RARP|
|814C|SNMP over Ethernet|
|86DD|IPv6|

#### 🎈 트레일러
FCS(Frame Check Sequence라고도 하며, 데이터 전송 도중에 오류가 발생하는지 확인하는 용도이다.

이처럼 이더넷 헤더와 트레일러가 추가된 데이터를 프레임이라고 한다.

전송된 데이터의 목적지 MAC 주소가 자신의 MAC주소가 아닌 컴퓨터들은 데이터를 파기 한다.

### 📚 LESSEN 14 : 스위치의 구조
스위치는 허브와 달리 데이터 충돌이 발생하지 않는다.

네트워크 구성에서 빠질 수 없는 스위치에 대해 알아보자.

#### 🎈 MAC 주소 테이블
스위치는 데이터 링크 계층에서 동작하고 레이어 2 스위치 또는 스위칭 허브 라고도 불린다.

스위치 내부에는 MAC 주소 테이블로 스위치의 포트 번호와 해당 포트에 연결되어있는 컴퓨터의 MAC 주소가 등록된 데이터베이스다.

초기에는 테이블에 아무 정보가 없지만 컴퓨터에서 목적지 MAC 주소가 추가된 프레임형태의 데이터가 전송되면 출발지 MAC주소를 확인하여 MAC 주소를 포트와 함께 등록한다. 이를 MAC 주소 학습 기능이라 한다.

MAC 주소 테이블에 정보가 부족하면 허브와 마찬가지로 다른 포트에도 데이터를 보내는데 이를 데이터 플러딩(flooding)이라 한다.

MAC 주소를 기준으로 목적지를 선택하는 것을 MAC 주소 필터링 이라 부르고 이것으로 불필요한 데이터 전송을 막는다.

### 📚 LESSEN 15 : 데이터가 케이블에서 충돌하지 않는 구조
케이블에 데이터가 아무리 많이 전송되어도 데이터가 충돌하지 않는 구조에 대해 알아보자.

#### 🎈 전이중 통신과 반이중 통신

- 전이중 통신 방식
  - 데이터의 송수신을 동시에 통신하는 방식
  - 스위치는 충돌이 일어나지 않는 구조라 전이중 통신 방식이다.
  - Ex)컴퓨터 두대를 크로스 케이블로 연결한 방식
- 반이중 통신 방식
  - 회선 하나로 송신과 수신을 번갈아가며 통신하는 방식
  - Ex)컴퓨터를 허브를 통해 연결한 방식
    
#### 🎈 충돌 도메인
충돌이 발생할 때 그 영향이 미치는 범위를 충돌 도메인(collision domain)이라 한다.

허브에 컴퓨터가 5대가 연결되어있고, 충돌이 발생한다면 해당 허브에 접속된 모든 컴퓨터가 충돌 도메인이 된다.

하지만 스위치는 전이중 방식이기 때문에 충돌이 일어나지 않고 충돌 도메인도 컴퓨터 한대씩으로 묶인다.

#### 🎈 ARP
ARP(Address Resolution Protocol)는 목적지 컴퓨터의 IP 주소를 이용하여 MAC 주소를 찾기 위한 프로토콜이다.

- 이더넷 프레임을 전송하려면 목적지 컴퓨터의 MAC 주소를 지정해야 한다.
- 출발지 컴퓨터가 목적지 주소를 모르면 MAC 주소를 알아내기 위해 네트워크에 브로드캐스트를 하는데
  - 이것을 ARP 요청이라 한다.
- 이 요청에 대해 지정된 IP주소를 가지지 않은 컴퓨터는 응답하지 않지만, 지정된 주소를 가진 컴퓨터는 MAC 주소를 자동으로 응답한다.
  - 이것을 ARP 응답이라 한다.
- 이것으로 출발지 컴퓨터는 MAC 주소를 얻고 이더넷 프레임을 만들 수 있다.
- 출발지 컴퓨터에서는 MAC 주소를 얻은 후 MAC 주소와 IP 주소의 매핑 정보를 메모리에 보관한다.
  - 이 정보를 ARP 테이블이라 한다.
  - 이후 데이터 통신은 자신의 컴퓨터에 보관된 ARP 테이블을 참고하여 전송한다.
- 하지만 IP 주소가 변경되면 해당 MAC 주소도 함께 변경되므로 제대로 통신할 수 없다.
- 그래서 ARP 테이블에서는 보존 기간을 ARP 캐시로 지정하고 일정 시간이 지나면 삭제후 다시 ARP 요청을 한다.
  > `arp -a` : ARP 캐시 내용 확인
  
  > `arp -d` : ARP 캐시 강제 삭제


### 📚 LESSEN 16 : 이더넷 규격
이더넷 종류와 규격 이름의 뜻을 알아보자.

#### 🎈 이더넷 규격

|규격 이름|통신 속도|케이블|케이블 최대 길이|표준화 연도|
|--|--|--|--|--|
|10BASE5|10Mbps|동축케이블|500m|1982년|
|10BASE2|10Mbps|동축케이블|185m|1988년|
|10BASE-T|10Mbps|UTP케이블(Cat3이상)|100m|1990년|
|100BASE-TX|100Mbps|UTP케이블(Cat5이상)|100m|1995년|
|1000BASE-T|1000Mbps|UTP케이블(Cat5이상)|100m|1995년|
|10GBASE-T|10Gbps|UTP케이블(Cat6a이상)|100m|2006년|

- `10`, `100`, `1000` : 통신 속도
- `BASE` : BASEBAND라는 전송 방식을 나타낸다.
- `T`, `TX` : 케이블 종류

최근 컴퓨터 랜 포트는 1000BASE-T가 일반적이지만 조금씩 10GBASE-T도 많아지고 있다.(2018-06 기준)
